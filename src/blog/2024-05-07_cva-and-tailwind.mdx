---
title: Simplifying complex component variants with Tailwind and CVA
description:
  Addressing Tailwind's common pitfalts when dealing with different variants of
  one component using Class Variance Authority.
image: /images/cva-tailwind.jpeg
published: false
---

Tailwind is a unponionated **utility-first CSS framework** that offers great
flexibility, reliability and zero-runtime overhead, which makes it one of the
best and most popular solutions out there when it comes to styling.

## The problem

Although I love working with Tailwind, I've noticed some potential pitfalls when
creating bigger components, for example as part of a design-system, that has a
lot of different style variants.

Consider the scenario of creating a component within a design system. This
component needs various states and styles, such as **size, color, disabled,**
etc. While Tailwind provides an extensive set of utility classes to customize
styles, managing and maintaining the `classNames` for a component like that can
become quite difficult overtime.

### Conditional variants

Let's look at the following button, this component can have three different
variants (contained, outlined, and text), along with color and disabled state
for all these variants:

#### Contained

<comp.ButtonsDemo variant="contained" />

#### Outlined

<comp.ButtonsDemo variant="outlined" />

#### Text

<comp.ButtonsDemo variant="text" />

## Manually matching props to classNames

Now let's explore how to manually matching those type to classNames.

### Prop types

Usually, I like to start by defining prop types as they give me a better picture
of the components behavior:

```typescript
interface ButtonProps {
  children: React.ReactNode;
  variant?: "contained" | "outlined" | "text";
  color?: "primary" | "success" | "danger";
  size?: "small" | "medium" | "large";
  disabled?: boolean;
}
```

### Implementation

My first thought would be to do something like this:

```typescript
const styles: string[] = [];

if (variant === "contained") {
  styles.push("text-cat-mantle");
  if (disabled) styles.push("bg-cat-overlay2")
  else
    styles.push(
      color === "primary" ? "bg-cat-blue hover:bg-cat-blue/80" : '',
      color === "success" ? "bg-cat-green hover:bg-cat-green/80" : '',
      color === "danger" ? "bg-cat-red hover:bg-cat-red/80" : '',
    )
}

<button className={styles.join(' ')} >{children}</button>
```

What if we try using [clsx](https://www.npmjs.com/package/clsx) to manage
classNames:

```typescript

const styles = clsx(
  variant === "container" && [
    "text-cat-mantle",
    disabled
      ? "bg-cat-overlay2"
      : [
          color === "primary" && "bg-cat-blue hover:bg-cat-blue/80",
          color === "success" && "bg-cat-green hover:bg-cat-green/80",
          color === "danger" && "bg-cat-red hover:bg-cat-red/80",
        ],
  ],
);

<button className={styles}>{children}</button>
```

It doesn't look too bad, but keep in mind that it is just a simple button with
simple styles, you can get an idea on how complicated it can get as soon as you
start adding all the other variants. Applying styles like that could easily
become very diffucult to follow and reason about, especially at a larger scale.

### Need of a better solution

Even after doing my best to organize all the conditionals using
[clsx](https://www.npmjs.com/package/clsx), you can see that it lacks a bit of
structure and consistency, which makes it hard to follow and understand at first
glance.

At this point, we need more a stable solution that can bring a better and more
consistent structure to apply style variants and conditional classNames. This is
when [CVA](https://cva.style/) comes into play.

## Class variance authority

A library that caught my attention a few weeks ago. CVA aims to take the away
pain points of manually matching classes to props and manually adding types.

Much like [Stitches](https://stitches.dev/), I feel like it introduces a more
structured approach to styling, allowing me to focus on the more fun aspects of
UI development.

### Implementing a better button

Let's take a closer look it and test whether it makes easier to match and apply
conditional classNames in a more readable way.

```typescript
const button = cva(
  "h-fit appearance-none rounded font-medium transition-colors",
  {
    variants: {
      variant: {
        contained: "text-cat-mantle",
        outlined: "border-2 bg-transparent",
        text: "bg-transparent",
      },
      color: {
        primary: "",
        success: "",
        danger: "",
      },
      size: {
        small: "px-4 py-1 text-sm",
        medium: "px-6 py-1.5 text-base",
        large: "px-8 py-2 text-lg",
      },
      disabled: {
        true: "cursor-not-allowed",
        false: "cursor-pointer",
      },
    },
    compoundVariants: [
      {
        variant: "contained",
        color: "primary",
        disabled: false,
        className: "bg-cat-blue hover:bg-cat-blue/80",
      },
      {
        variant: "contained",
        color: "success",
        disabled: false,
        className: "bg-cat-green hover:bg-cat-green/80",
      },
      {
        variant: "contained",
        color: "danger",
        disabled: false,
        className: "bg-cat-red hover:bg-cat-red/80",
      },
      {
        variant: "contained",
        color: ["primary", "success", "danger"],
        disabled: true,
        className: "bg-cat-overlay2",
      },
      {
        variant: "outlined",
        color: "primary",
        disabled: false,
        className: "border-cat-blue text-cat-blue hover:bg-cat-blue/15",
      },
      {
        variant: "outlined",
        color: "success",
        disabled: false,
        className: "border-cat-green text-cat-green hover:bg-cat-green/15",
      },
      {
        variant: "outlined",
        color: "danger",
        disabled: false,
        className: "border-cat-red text-cat-red hover:bg-cat-red/15",
      },
      {
        variant: "outlined",
        color: ["primary", "success", "danger"],
        disabled: true,
        className: "border-cat-overlay2 text-cat-overlay2",
      },
      {
        variant: "text",
        color: "primary",
        disabled: false,
        className: "text-cat-blue hover:bg-cat-blue/15",
      },
      {
        variant: "text",
        color: "success",
        disabled: false,
        className: "text-cat-green hover:bg-cat-green/15",
      },
      {
        variant: "text",
        color: "danger",
        disabled: false,
        className: "text-cat-red hover:bg-cat-red/15",
      },
      {
        variant: "text",
        color: ["primary", "success", "danger"],
        disabled: true,
        className: "text-cat-overlay2",
      },
    ],
    defaultVariants: {
      variant: "contained",
      color: "primary",
      disabled: false,
      size: "medium",
    },
  },
);
```
